# ==========================================
# REQUIRED: Security Secrets
# ==========================================
# IMPORTANT: Generate strong secrets (at least 64 characters each).
# These secrets are CRITICAL for application security.
# 
# To generate secure secrets, run:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# The application will FAIL TO START if:
#   - JWT_SECRET is not set or shorter than 64 characters
#   - COOKIE_SECRET is not set or shorter than 64 characters
#
# NEVER use default or weak secrets in production!
JWT_SECRET=your_jwt_secret_here_min_64_chars_generate_using_crypto_randomBytes
COOKIE_SECRET=your_cookie_secret_here_min_64_chars_generate_using_crypto_randomBytes

# ==========================================
# Database Configuration
# ==========================================
DATABASE_URL=postgres://medusa:medusa@localhost:5432/medusa

# ==========================================
# CORS Configuration
# ==========================================
STORE_CORS=http://localhost:8000,https://docs.medusajs.com
ADMIN_CORS=http://localhost:5173,http://localhost:9000,https://docs.medusajs.com
AUTH_CORS=http://localhost:5173,http://localhost:9000,http://localhost:8000,https://docs.medusajs.com

# ==========================================
# Redis Configuration
# ==========================================
REDIS_URL=redis://localhost:6379

# ==========================================
# Medusa Admin Configuration
# ==========================================
MEDUSA_ADMIN_ONBOARDING_TYPE=nextjs
MEDUSA_ADMIN_ONBOARDING_NEXTJS_DIRECTORY=TheRxSpot_Marketplace-storefront

# ==========================================
# Multi-tenant Configuration
# ==========================================
# Comma-separated list of domains that belong to the platform (not tenants)
PLATFORM_DOMAINS=localhost,127.0.0.1

# ==========================================
# Document Storage Configuration
# ==========================================

# Storage provider: 's3' for AWS S3, 'local' for development
DOCUMENT_STORAGE_PROVIDER=local

# S3 Configuration (required if DOCUMENT_STORAGE_PROVIDER=s3)
DOCUMENT_STORAGE_BUCKET=therxspot-documents
DOCUMENT_STORAGE_REGION=us-east-1
DOCUMENT_STORAGE_ENDPOINT=s3.amazonaws.com
DOCUMENT_STORAGE_ACCESS_KEY=your_access_key
DOCUMENT_STORAGE_SECRET_KEY=your_secret_key

# KMS Key ID for server-side encryption (optional, uses AES256 if not set)
DOCUMENT_ENCRYPTION_KEY_ID=

# Local Storage Configuration (for development)
LOCAL_UPLOAD_DIR=uploads
LOCAL_BASE_URL=http://localhost:9000

# File Upload Limits
DOCUMENT_MAX_SIZE=10485760
DOCUMENT_ALLOWED_TYPES=application/pdf,image/jpeg,image/png,image/tiff

# ==========================================
# Audit Logging Configuration
# ==========================================

# Retention period for audit logs in days (default: 2555 = 7 years for HIPAA)
AUDIT_LOG_RETENTION_DAYS=2555

# Minimum risk level to log (low, medium, high, critical)
AUDIT_LOG_LEVEL=low

# ==========================================
# Database Encryption (HIPAA Compliance)
# ==========================================

# Enable PHI field-level encryption (recommended for production)
PHI_ENCRYPTION_ENABLED=false

# 32-byte encryption key for PHI field-level encryption.
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Keep this secure and backed up - losing it means losing access to all encrypted PHI!
#
# Accepted formats:
# - Hex (64 chars) OR base64/base64url (decodes to 32 bytes)
ENCRYPTION_KEY_CURRENT=

# Optional key rotation. Decrypt will try current key first, then old keys.
# Accepted formats:
# - JSON array of keys (recommended): ["<hexOrBase64Key1>","<hexOrBase64Key2>"]
# - Comma-separated list: <key1>,<key2>
ENCRYPTION_KEY_OLD=[]

# ==========================================
# Virus Scanning Configuration
# ==========================================

# ClamAV daemon connection (optional - if not provided, falls back to file-type validation)
# Install ClamAV: https://www.clamav.net/documents/installing-clamav
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
